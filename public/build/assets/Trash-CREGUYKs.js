import{s as S,a as I,A as j}from"./AuthenticatedLayout-Bx_ieomf.js";import{Q as B,T as F,j as u,o as m,f as x,b as e,d as g,a as i,w as M,F as y,h as V,m as A,p as D,c as N,q,g as z,n as L,t as w}from"./app-B-nztPtg.js";import{h as O,_ as E}from"./http-helper-DjScDh2K.js";import{_ as C}from"./Checkbox-BT4UPlW1.js";import{_ as $}from"./ConfirmationDialog-DcUkoatk.js";import"./ApplicationLogo-B0l23eNf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-DkfOyd5y.js";import"./TextInput-s5tYKQhs.js";import"./PrimaryButton-B3wwABLf.js";import"./DangerButton-BJoHs5xd.js";const R=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),T={__name:"RestoreFilesButton",props:{allSelected:{type:Boolean,default:!1,required:!1},selectedIds:{type:Array,required:!1}},emits:["restore"],setup(f,{emit:n}){B();const s=F({all:null,ids:[],parent_id:null}),t=u(!1),r=f,a=n;function d(){if(!r.allSelected&&!r.selectedIds.length){S("Please select at least one file to restore");return}t.value=!0}function h(){t.value=!1}function p(){r.allSelected?s.all=!0:s.ids=r.selectedIds,s.post(route("file.restore"),{onSuccess:()=>{t.value=!1,a("restore"),I("Selected files have been restored")}})}return(_,v)=>(m(),x(y,null,[e("button",{onClick:d,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"},[R,g(" Restore ")]),i($,{show:t.value,message:"Are you sure want to restore selected files? ",onCancel:h,onConfirm:p},{default:M(()=>[g(" Restore ")]),_:1},8,["show"])],64))}},U=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),P={__name:"DeleteForeverButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["delete"],setup(f,{emit:n}){B();const s=F({all:null,ids:[],parent_id:null}),t=u(!1),r=f,a=n;function d(){if(!r.allSelected&&!r.selectedIds.length){S("Please select at least one file to delete");return}t.value=!0}function h(){t.value=!1}function p(){r.allSelected?(s.all=!0,s.ids=[]):s.ids=r.selectedIds,s.delete(route("file.deleteForever"),{onSuccess:()=>{t.value=!1,a("delete"),I("Selected files have been deleted forever")}})}return(_,v)=>(m(),x(y,null,[e("button",{onClick:d,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white mr-3"},[U,g(" Delete Forever ")]),i($,{show:t.value,message:"Are you sure you want to delete selected files?",onCancel:h,onConfirm:p},null,8,["show"])],64))}},G={class:"flex items-center justify-end p-1 mb-3"},H={class:"flex-1 overflow-auto"},Q={class:"min-w-full"},J={class:"bg-gray-100 border-b"},K={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},W=e("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Name ",-1),X=e("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Path ",-1),Y=e("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Size ",-1),Z=["onClick"],ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},le={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},oe={key:0,class:"py-8 text-center text-sm text-gray-400"},xe={__name:"Trash",props:{files:Object,folder:Object,ancestors:Object},setup(f){const n=f,s=u(!1),t=u({}),r=u(null),a=u({data:n.files.data,next:n.files.links.next}),d=V(()=>Object.entries(t.value).filter(o=>o[1]).map(o=>o[0]));function h(){console.log("load more"),console.log(a.value.next),a.value.next!==null&&O(a.value.next).then(o=>{a.value.data=[...a.value.data,...o.data],a.value.next=o.links.next})}function p(){a.value.data.forEach(o=>{t.value[o.id]=s.value})}function _(o){t.value[o.id]=!t.value[o.id],v(o)}function v(o){if(!t.value[o.id])s.value=!1;else{let c=!0;for(let l of a.value.data)if(!t.value[l.id]){c=!1;break}s.value=c}}function k(){s.value=!1,t.value={}}return A(()=>{a.value={data:n.files.data,next:n.files.links.next}}),D(()=>{new IntersectionObserver(c=>c.forEach(l=>l.isIntersecting&&h()),{rootMargin:"-250px 0px 0px 0px"}).observe(r.value)}),(o,c)=>(m(),N(j,null,{default:M(()=>[e("nav",G,[e("div",null,[i(P,{"all-selected":s.value,"selected-ids":d.value,onDelete:k},null,8,["all-selected","selected-ids"]),i(T,{"all-selected":s.value,"selected-ids":d.value,onRestore:k},null,8,["all-selected","selected-ids"])])]),e("div",H,[e("table",Q,[e("thead",J,[e("tr",null,[e("th",K,[i(C,{onChange:p,checked:s.value,"onUpdate:checked":c[0]||(c[0]=l=>s.value=l)},null,8,["checked"])]),W,X,Y])]),e("tbody",null,[(m(!0),x(y,null,q(a.value.data,l=>(m(),x("tr",{key:l.id,onClick:b=>_(l),class:L(["border-b transition duration-900 ease-in-out hover:bg-blue-100 cursor-pointer",t.value[l.id]||s.value?"bg-blue-50":"bg-white"])},[e("td",ee,[i(C,{onChange:b=>v(l),modelValue:t.value[l.id],"onUpdate:modelValue":b=>t.value[l.id]=b,checked:t.value[l.id]||s.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),e("td",te,[i(E,{file:l},null,8,["file"]),g(" "+w(l.name),1)]),e("td",se,w(l.path),1),e("td",le,w(l.size),1)],10,Z))),128))])]),a.value.data.length?z("",!0):(m(),x("div",oe," There is no data in this folder ")),e("div",{ref_key:"loadMoreIntersect",ref:r},null,512)])]),_:1}))}};export{xe as default};
