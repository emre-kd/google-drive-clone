import{A as k}from"./AuthenticatedLayout-Bx_ieomf.js";import{j as c,h as w,m as C,p as V,o as d,c as S,w as j,b as a,a as i,f as m,q as M,F as I,g as N,n as O,d as $,t as p}from"./app-B-nztPtg.js";import{h as B,_ as F}from"./http-helper-DjScDh2K.js";import{_ as f}from"./Checkbox-BT4UPlW1.js";import{_ as U}from"./DownloadFilesButton-C9ppu_bB.js";import"./ApplicationLogo-B0l23eNf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-DkfOyd5y.js";import"./TextInput-s5tYKQhs.js";import"./PrimaryButton-B3wwABLf.js";const z={class:"flex items-center justify-end p-1 mb-3"},A={class:"flex-1 overflow-auto"},E={class:"min-w-full"},L={class:"bg-gray-100 border-b"},T={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},q=a("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Name ",-1),D=a("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Path ",-1),G=a("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Size ",-1),P=["onClick"],W={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Q={key:0,class:"py-8 text-center text-sm text-gray-400"},ne={__name:"SharedWithMe",props:{files:Object,folder:Object,ancestors:Object},setup(v){const r=v,l=c(!1),o=c({}),x=c(null),s=c({data:r.files.data,next:r.files.links.next}),_=w(()=>Object.entries(o.value).filter(t=>t[1]).map(t=>t[0]));function g(){console.log("load more"),console.log(s.value.next),s.value.next!==null&&B(s.value.next).then(t=>{s.value.data=[...s.value.data,...t.data],s.value.next=t.links.next})}function y(){s.value.data.forEach(t=>{o.value[t.id]=l.value})}function b(t){o.value[t.id]=!o.value[t.id],h(t)}function h(t){if(!o.value[t.id])l.value=!1;else{let n=!0;for(let e of s.value.data)if(!o.value[e.id]){n=!1;break}l.value=n}}return C(()=>{s.value={data:r.files.data,next:r.files.links.next}}),V(()=>{new IntersectionObserver(n=>n.forEach(e=>e.isIntersecting&&g()),{rootMargin:"-250px 0px 0px 0px"}).observe(x.value)}),(t,n)=>(d(),S(k,null,{default:j(()=>[a("nav",z,[a("div",null,[i(U,{all:l.value,ids:_.value,"shared-with-me":!0,class:"mr-2"},null,8,["all","ids"])])]),a("div",A,[a("table",E,[a("thead",L,[a("tr",null,[a("th",T,[i(f,{onChange:y,checked:l.value,"onUpdate:checked":n[0]||(n[0]=e=>l.value=e)},null,8,["checked"])]),q,D,G])]),a("tbody",null,[(d(!0),m(I,null,M(s.value.data,e=>(d(),m("tr",{key:e.id,onClick:u=>b(e),class:O(["border-b transition duration-900 ease-in-out hover:bg-blue-100 cursor-pointer",o.value[e.id]||l.value?"bg-blue-50":"bg-white"])},[a("td",W,[i(f,{onChange:u=>h(e),modelValue:o.value[e.id],"onUpdate:modelValue":u=>o.value[e.id]=u,checked:o.value[e.id]||l.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),a("td",H,[i(F,{file:e},null,8,["file"]),$(" "+p(e.name),1)]),a("td",J,p(e.path),1),a("td",K,p(e.size),1)],10,P))),128))])]),s.value.data.length?N("",!0):(d(),m("div",Q," There is no data in this folder ")),a("div",{ref_key:"loadMoreIntersect",ref:x},null,512)])]),_:1}))}};export{ne as default};
